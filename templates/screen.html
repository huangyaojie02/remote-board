<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
  const board = document.getElementById("board");

  const socket = io("/screen", {
    path: "/socket.io",
    transports: ["websocket", "polling"],
    reconnection: true,
    reconnectionAttempts: Infinity,
    reconnectionDelay: 1000
  });

  function render(text) {
    board.textContent = text || "";
  }

  socket.on("connect", () => {
    // 连接成功后，服务器会立刻 emit("update", last_message)
    console.log("screen connected");
  });

  socket.on("update", (data) => {
    render((data && data.text) || "");
  });

  socket.on("connect_error", (e) => {
    console.log("screen connect_error:", e.message);
  });
</script>
