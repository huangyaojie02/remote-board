<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è¿œç¨‹ç•™è¨€ - æ˜¾ç¤ºç«¯</title>
  <link rel="stylesheet" href="/static/style.css" />
  <style>
    body { margin:0; background:#111; color:#fff; display:flex; align-items:center; justify-content:center; height:100vh; }
    #board { font-size:8vw; text-align:center; word-break:break-word; }
    #status { position:fixed; bottom:10px; left:10px; font-size:14px; color:#888; }
  </style>
</head>
<body class="screen">
  <div id="board">ä½ å¥½å¤–å…¬ ğŸŒ</div>
  <div id="status">çŠ¶æ€ï¼šç­‰å¾…è¿æ¥â€¦</div>

  <!-- âš ï¸ åŒæ ·ä½¿ç”¨åç«¯è‡ªå¸¦ socket.io è„šæœ¬ -->
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const boardEl  = document.getElementById("board");
    const statusEl = document.getElementById("status");

    function show(s){ statusEl.textContent = "çŠ¶æ€ï¼š" + s; }

    // è¿æ¥ /screen å‘½åç©ºé—´
    const socket = io("/screen", { transports: ["websocket"] });

    socket.on("connect",       () => show("å·²è¿æ¥ /screen (id=" + socket.id + ")"));
    socket.on("connect_error", e  => show("è¿æ¥å¤±è´¥ï¼š" + e.message));
    socket.on("disconnect",    r  => show("æ–­å¼€ï¼š" + r));

    // æ¥æ”¶åç«¯å¹¿æ’­çš„ update æ¶ˆæ¯
    socket.on("update", data => {
      const text = (data && data.text) ? data.text : "";
      boardEl.textContent = text || "ï¼ˆæš‚æ— å†…å®¹ï¼‰";
      show("å·²æ›´æ–°");
    });
  </script>
</body>
</html>
